# Cloudflare API - Visual Reference

```
┌─────────────────────────────────────────────────────────────────────┐
│                  Cloudflare API في منصة BSM                         │
│                                                                      │
│  3 أنواع من Tokens لاستخدامات مختلفة                               │
└─────────────────────────────────────────────────────────────────────┘


┌──────────────────────────────────────────────────────────────────────┐
│ 1️⃣  للمزامنة التلقائية (BSU Nexus Sync)                            │
├──────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   Workflow: .github/workflows/nexus-sync.yml                         │
│   Agent: agents/autonomous_sync_agent.py                             │
│                                                                       │
│   ┌─────────────────────┐                                            │
│   │ CLOUDFLARE_TOKEN    │ ← API Token (DNS Read)                    │
│   └─────────────────────┘                                            │
│                                                                       │
│   ┌─────────────────────┐                                            │
│   │ CLOUDFLARE_ZONE_ID  │ ← 47f901b97bf4724266f6a0e7c1006a1d        │
│   └─────────────────────┘                                            │
│                                                                       │
│   الاستخدام: قراءة DNS records والتحقق من صحتها كل ساعتين          │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘


┌──────────────────────────────────────────────────────────────────────┐
│ 2️⃣  للنشر ومسح Cache                                                │
├──────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   Workflows:                                                          │
│   • .github/workflows/cf-purge-cache.yml (مسح Cache)                 │
│   • .github/workflows/cf-deploy.yml (النشر على Pages)                │
│                                                                       │
│   ┌─────────────────────┐                                            │
│   │ CF_API_TOKEN        │ ← API Token (Cache + Pages R/W)           │
│   └─────────────────────┘                                            │
│                                                                       │
│   ┌─────────────────────┐                                            │
│   │ CF_ZONE_ID          │ ← Zone ID لمسح Cache                       │
│   └─────────────────────┘                                            │
│                                                                       │
│   ┌─────────────────────┐                                            │
│   │ CF_ACCOUNT_ID       │ ← Account ID للنشر                         │
│   └─────────────────────┘                                            │
│                                                                       │
│   ┌─────────────────────┐                                            │
│   │ CF_PROJECT_NAME     │ ← اسم مشروع Pages                          │
│   └─────────────────────┘                                            │
│                                                                       │
│   الاستخدام: مسح Cache والنشر على Cloudflare Pages                  │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘


┌──────────────────────────────────────────────────────────────────────┐
│ 3️⃣  للسكربتات المحلية                                               │
├──────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   Script: scripts/setup_github_pages_verification.sh                 │
│                                                                       │
│   ┌─────────────────────┐                                            │
│   │ CLOUDFLARE_API_TOKEN│ ← API Token (DNS Edit)                    │
│   └─────────────────────┘                                            │
│                                                                       │
│   الاستخدام: إدارة DNS records من command line                      │
│   مثال: إضافة TXT record للتحقق من GitHub Pages                     │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘


┌──────────────────────────────────────────────────────────────────────┐
│ 📋 ملخص الأسماء                                                      │
├──────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   CLOUDFLARE_TOKEN        → BSU Nexus (DNS Read)                    │
│   CLOUDFLARE_ZONE_ID      → BSU Nexus (Zone ID)                     │
│                                                                       │
│   CF_API_TOKEN            → Workflows (Cache + Deploy)               │
│   CF_ZONE_ID              → Cache Purge                              │
│   CF_ACCOUNT_ID           → Pages Deploy                             │
│   CF_PROJECT_NAME         → Pages Project                            │
│                                                                       │
│   CLOUDFLARE_API_TOKEN    → Local Scripts (DNS Edit)                │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘


┌──────────────────────────────────────────────────────────────────────┐
│ 🔐 معلومات الأمان                                                    │
├──────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   ✅ جميع Tokens محفوظة في GitHub Secrets                           │
│   ✅ لا توضع أبدًا في ملفات .env                                     │
│   ✅ كل Token له صلاحيات محدودة (Least Privilege)                   │
│   ✅ Gitleaks يكتشف تسريب Tokens تلقائيًا                            │
│                                                                       │
│   ⚠️  لا تشارك Tokens مع أحد                                        │
│   ⚠️  قم بتدوير Tokens كل 3-6 أشهر                                  │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘


┌──────────────────────────────────────────────────────────────────────┐
│ 📍 معلومات النطاق الحالي                                            │
├──────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   Domain: corehub.nexus                                              │
│   Zone ID: 47f901b97bf4724266f6a0e7c1006a1d                          │
│   Provider: Cloudflare                                               │
│   Config: docs/nexus.config.json                                     │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘


┌──────────────────────────────────────────────────────────────────────┐
│ 📚 الوثائق الكاملة                                                   │
├──────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   📖 docs/CLOUDFLARE-API-NAMES.md                                    │
│      └─ توثيق شامل ومفصل بالعربية (9.4 KB)                          │
│                                                                       │
│   📝 docs/CLOUDFLARE-QUICK-REFERENCE-AR.md                           │
│      └─ دليل مرجعي سريع (3.4 KB)                                    │
│                                                                       │
│   💡 docs/CLOUDFLARE-API-ANSWER.md                                   │
│      └─ إجابة مباشرة على السؤال                                     │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘


┌──────────────────────────────────────────────────────────────────────┐
│ 🎯 أمثلة سريعة                                                       │
├──────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   # تشغيل BSU Nexus محليًا                                          │
│   export CLOUDFLARE_TOKEN="your_token"                               │
│   export CLOUDFLARE_ZONE_ID="47f901b97bf4724266f6a0e7c1006a1d"      │
│   python agents/autonomous_sync_agent.py                             │
│                                                                       │
│   # إعداد GitHub Pages                                               │
│   export CLOUDFLARE_API_TOKEN="your_token"                           │
│   ./scripts/setup_github_pages_verification.sh                       │
│                                                                       │
│   # مسح Cache من command line                                        │
│   curl -X POST \                                                     │
│     "https://api.cloudflare.com/client/v4/zones/ZONE_ID/purge_cache"\│
│     -H "Authorization: Bearer CF_API_TOKEN" \                        │
│     -H "Content-Type: application/json" \                            │
│     --data '{"purge_everything":true}'                               │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘
```
