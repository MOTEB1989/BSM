# ุฑุจุท iPhone ูCursor (Windows) ููุชุญูู ุนู ุจูุนุฏ ููุงุฌูุงุช ุงูุฏุฑุฏุดุฉ

ูุฐุง ุงูุฏููู ูุฌูุฒ ูุดุฑูุน BSM ุจุญูุซ:

- ูุนูู ูู **iPhone** ุนุจุฑ ูุงุฌูุงุช ููุจ/PWA.
- ูุชุตู ูู **Cursor ุนูู Windows** ุนุจุฑ MCP.
- ููููุฑ ุชูุฌูู ุฏุฑุฏุดุฉ ูุชุนุฏุฏ ุงูููุงุฐุฌ ุนุจุฑ `banking-hub`.

## 1) ุฅุตูุงุญ Git Remote

ููุฐ ุงูุฃูุงูุฑ ุงูุชุงููุฉ:

```bash
git remote -v
git status
```

ุชุฃูุฏ ูู ุฃู ุงูุฑูููุช ุงูุตุญูุญ ูู:

```bash
git remote set-url origin https://github.com/MOTEB1989/BSM.git
```

## 2) ุชุดุบูู ุงูุฎุงุฏู ููุงุชุตุงู ูู iPhone

```bash
npm ci
npm run dev
```

ุจุนุฏ ุงูุชุดุบูู:

- ูุงุฌูุฉ ุงูุฏุฑุฏุดุฉ: `http://<YOUR-IP>:3000/chat`
- ูุงุฌูุฉ iOS: `http://<YOUR-IP>:3000/ios-app`
- API: `http://<YOUR-IP>:3000/api`

### ๐ ููุงุญุธุงุช ุฃูุงู ูุงูุฉ ููุงุชุตุงู ุงูุฎุงุฑุฌู

โ๏ธ **ุชุญุฐูุฑ**: ุนูุฏ ุงููุตูู ูู BSM ูู ุฎุงุฑุฌ ุงูุดุจูุฉ ุงููุญููุฉ (ูุซู iPhone ุฎุงุฑุฌ ุดุจูุฉ WiFi ุงูููุฒููุฉ):

1. **ูุง ุชูุชุญ ุงูููุงูุฐ ูุจุงุดุฑุฉ** - ุงุณุชุฎุฏู ููู ุขูู:
   - Cloudflare Tunnel (ููุตู ุจู ููุฅูุชุงุฌ)
   - Tailscale Funnel (ููุตู ุจู ููุงุณุชุฎุฏุงู ุงูุดุฎุตู)

2. **ูุนูู ุงูุญูุงูุฉ ุงูุฃูููุฉ ูุจู ุงูุชุนุฑุถ ููุฅูุชุฑูุช**:
   - ุงุถุจุท `ADMIN_TOKEN` ููู (16 ุญุฑู ุนูู ุงูุฃูู) ูู ููู `.env`
   - ุฑุงุฌุน ููู `MOBILE_MODE.md` ูููู ุงููููุฏ ุงููุทุจูุฉ ุนูู ุงุชุตุงูุงุช iPhone
   - ุฑุงุฌุน ููู `SECURITY.md` ูุฅุนุฏุงุฏุงุช ุงูุฃูุงู ุงูุดุงููุฉ

3. **ูููุฏ Mobile Mode**:
   - ุนูุฏ ุงุชุตุงู iPhone ูู ุฎุงุฑุฌ ุงูุดุจูุฉ ุงููุญููุฉุ ูุทุจูู `MOBILE_MODE` ูููุฏุงู ุนูู ุงูุนูููุงุช ุงูุฎุทุฑุฉ
   - ุจุนุถ ูููุงุก ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุฏ ุชููู ูุญุธูุฑุฉ ูู ุงููุตูู ุนุจุฑ ุงูููุจุงูู ุญุณุจ ุฅุนุฏุงุฏ `contexts.allowed`

4. **ูููุฏ LAN_ONLY**:
   - ุฅุฐุง ูุงู `LAN_ONLY=true`ุ ูู ููุจู ุงูุฎุงุฏู ุงุชุตุงูุงุช ูู ุฎุงุฑุฌ ุงูุดุจูุฉ ุงููุญููุฉ ูุทููุงู

ููุงุณุชุฎุฏุงู ุงูุฎุงุฑุฌู (ุฎุงุฑุฌ ููุณ ุงูุดุจูุฉ)ุ ุงุณุชุฎุฏู ููู ุขูู ูุซู Cloudflare Tunnel ุฃู Tailscale Funnel ุจุฏู ูุชุญ ุงูููุงูุฐ ูุจุงุดุฑุฉ.

## 3) ุฅุนุฏุงุฏ MCP ูู Cursor Windows

ูู ุงููุดุฑูุน ููุฌุฏ ูููุงู ุฅุนุฏุงุฏ ูู MCPุ ููู ุนููู (Client) ูููู ุงูุฎุงุต:

### 3.1) ููู `mcp-settings.json` - ูู Cursor (Windows)

- **ุงูุงุณุชุฎุฏุงู**: ุชุทุจูู Cursor ููุท
- **ุงูุจููุฉ**: ูุนุชูุฏ ุญูู `servers` ููุญุชูู ูุฑุฌุน `$schema` ูุชุนุฑูู ุจููุฉ ุงูููู
- **ุงูุฎุงุฏู ุงููุถุงู**: `bsm-banking-agents` โ `./mcp-servers/banking-hub.js`

### 3.2) ููู `.github/copilot/mcp.json` - ูู GitHub Copilot

- **ุงูุงุณุชุฎุฏุงู**: GitHub Copilot ููุท (ููุง ููุฑุฃู Cursor)
- **ุงูุจููุฉ**: ูุนุชูุฏ ุญูู `mcpServers`ุ ููุฏ ูุง ูุญุชูู ุนูู ุญูู `$schema` ูุฃู ุตูุบุฉ Copilot ูุฎุชููุฉ
- **ุงูุฎุงุฏู ุงููุถุงู**: ููุณ ุงูุฎุงุฏู ุงูููุทูู `bsm-banking-agents` ูููู ุจุตูุบุฉ ุงูุฅุนุฏุงุฏ ุงูุฎุงุตุฉ ุจู Copilot

> **ููุงุญุธุฉ**:  
> - ูุฌุจ ุฃู ูุนุฑูู ููุง ุงูููููู **ููุณ ุฎูุงุฏู MCP ุงูููุทููุฉ** (ูุซู `bsm-banking-agents`) ุญุชู ุชุญุตู ุนูู ููุณ ุงูุณููู ูู Cursor ูGitHub Copilot.  
> - ุงูุงุฎุชูุงู ูู ุฃุณูุงุก ุงูุญููู (`servers` ููุงุจู `mcpServers`) ููุฌูุฏ `$schema` ูู ุงุฎุชูุงู ููุตูุฏ ูุฃู ูู ุนููู ูุชููุน ุชูุณููุงู ูุฎุชููุงูุ ูููุณ ุฎุทุฃ ูู ุงูุฅุนุฏุงุฏ.

## 4) ุชุดุบูู ุฎุงุฏู MCP ุงูุจููู

```bash
cd mcp-servers
npm install
npm run start:banking
```

ุงูุฃุฏูุงุช ุงููุชุงุญุฉ:

- `route_banking_query`
- `check_agent_status`

## 5) ุฅูุดุงุก ูุงุฌูุงุช ูุฏุฑุฏุดุงุช ููุงุฐุฌ ุงูุฐูุงุก ุงูุงุตุทูุงุนู

ุงููุงุฌูุงุช ุงูุฌุงูุฒุฉ ูู ุงููุดุฑูุน:

- `/chat` ูุงุฌูุฉ ุฏุฑุฏุดุฉ ุฑุฆูุณูุฉ (AR/EN)
- `/ios-app` ูุงุฌูุฉ iPhone ูุญุณูุฉ + ุชุจููุจ ุชุญูู ุนู ุจูุนุฏ (Remote)
- `frontend/` ูุงุฌูุฉ ุซุงุจุชุฉ ูุงุจูุฉ ูููุดุฑ (GitHub Pages)

ูุญุงุฏุซุงุช ุงูููุงุฐุฌ ุชูุฑ ุนุจุฑ:

- `POST /api/chat/direct`
- ููููุงุก ุงููุธุงู ุนุจุฑ `POST /api/control/run`

ุชูุช ุฅุถุงูุฉ ูุณุงุฑ MCP HTTP ูููุงุฌูุฉ:

- `GET /api/mcp/tools`
- `GET /api/mcp/connection-status` (ูุญุต ุฌุงูุฒูุฉ Cursor Windows)
- `POST /api/mcp/tools/call`

## 6) ููุงุญุธุงุช ุฃูุงู ุณุฑูุนุฉ

### 6.1) ุญูุงูุฉ ููุงุชูุญ API
- **ูุง ุชุญูุธ ููุงุชูุญ API ุฏุงุฎู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ** - ุงุณุชุฎุฏู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ููุท
- ุงุญูุธ ุฌููุน ุงูููุงุชูุญ ูู ููู `.env` ููุง ุชุฑูุนู ุฅูู Git (ูุฏุฑุฌ ูู `.gitignore`)

### 6.2) ุงููุตุงุฏูุฉ ูุงูุชุฑุฎูุต
- **ูุนูู `ADMIN_TOKEN` ููู** ูู ููู `.env` ูุจู ุงููุดุฑ ููุฅูุชุงุฌ
- ุงูุญุฏ ุงูุฃุฏูู: 16 ุญุฑูุ ูุฌุจ ุฃูุง ูููู `change-me`
- ุฑุงุฌุน `SECURITY.md` ููุฒูุฏ ูู ูุนุงููุฑ ุงููุตุงุฏูุฉ

### 6.3) ูุถุน ุงูุฃูุงู (SAFE_MODE)
- **ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ**: ุงุฌุนู `SAFE_MODE=true` ุฏุงุฆูุงู
- **ููุท ุนูุฏ ุงูุญุงุฌุฉ**: ุงุถุจุทู ุฅูู `false` ุนูุฏ ูุฌูุฏ ุญุงุฌุฉ ููุซูุฉ ูุงุชุตุงูุงุช ุฎุงุฑุฌูุฉ ูุญุฏุฏุฉ
- **ุจุนุฏ ุงูุงูุชูุงุก**: ุฃุนุฏู ุฅูู `true` ููุฑุงู
- ูุถุน ุงูุฃูุงู ูููุน ุฌููุน ุงุณุชุฏุนุงุกุงุช API ุงูุฎุงุฑุฌูุฉ ูุญูุงูุฉ ุงููุธุงู

### 6.4) ุฅุนุฏุงุฏ CORS
- **ุงุจุฏุฃ ุจุฑูุถ ุงููู (Deny by Default)**: ูุง ุชูุนูู CORS ุนูู ูุณุชูู ูุงุณุน
- **ุงุณุชุฎุฏู ุงููุงุฆูุฉ ุงูุจูุถุงุก**: ุงุถุจุท ูุชุบูุฑ ุงูุจูุฆุฉ `CORS_ORIGINS` (ููุง ูู ููุซูู ูู `.env.example` ู`src/config/env.js`) ูุญุตุฑ ุงููุทุงูุงุช ุงููุณููุญ ุจูุง ููุท
- **ุฑุงุฌุน ุงูุชูุซูู**: ุฑุงุฌุน ููู `SECURITY.md` ูุชูุงุตูู ุฅุนุฏุงุฏ CORS ุงูุขูู
- ูุซุงู: `CORS_ORIGINS=https://example.com,https://app.example.com`
