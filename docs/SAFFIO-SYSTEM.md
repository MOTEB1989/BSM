# ๐ค ูุธุงู ุตุงููู ูููุน ุงูุชูุฑุงุฑ

## ูุธุฑุฉ ุนุงูุฉ
ูุธุงู ุตุงููู ูู ุญู ุดุงูู ูููุน ุชูุฑุงุฑ ุงููููุงุก (Agents) ูู ูุณุชูุฏุน BSM/LexBANK.

## ุงูููููุงุช

### 1. Duplication Detector
- **ุงูููู**: `scripts/prevent-duplicate-agents.js`
- **ุงููุธููุฉ**: ูุดู ุงูุชุทุงุจู ุงููุงูู (100%) ูุงูุฌุฒุฆู (70%+)
- **ุงูุงุณุชุฎุฏุงู**: `npm run check:duplicates`

### 2. Smart Merge
- **ุงูููู**: `scripts/merge-agents.js`
- **ุงููุธููุฉ**: ุฏูุฌ ุฐูู ูู ูุณุชูุฏุนุงุช ูุชุนุฏุฏุฉ
- **ุงูุงุณุชุฎุฏุงู**: `npm run merge:agents`

### 3. Git Hooks
- **Pre-commit**: ูููุน commit ุฅุฐุง ูุงู ููุงู ุชูุฑุงุฑ
- **ุงูุชุซุจูุช**: `npm run install:hooks`

### 4. GitHub Actions
- **Validation Workflow**: ููุญุต ูู PR
- **Sync Workflow**: ูุฒุงููุฉ ุจูู MOTEB1989/BSM ู LexBANK/BSM

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุฅุถุงูุฉ ูููู ุฌุฏูุฏ
```bash
# 1. ุนุฏู agents/registry.yaml
# 2. ุดุบู ุงููุญุต
npm run check:duplicates

# 3. ุฅุฐุง ูุฌุญุ commit
git add agents/registry.yaml
git commit -m "feat: add new agent"
```

### ุญู ุงูุชูุฑุงุฑุงุช
```bash
# 1. ุดุบู ุงูุชูุฑูุฑ
npm run check:duplicates

# 2. ุฑุงุฌุน ุงููููุงุก ุงูููุฑุฑุฉ
# 3. ุงุญุฐู ุงููููู ุงูููุฑุฑ ูู registry.yaml
# 4. ุชุญูู ูุฑุฉ ุฃุฎุฑู
npm run check:duplicates
```

## ุงูููุงุนุฏ

### ูุณุชููุงุช ุงูุชุดุงุจู
- **100%**: ุชุทุงุจู ูุงูู (ID, name, category, contexts)
- **70-99%**: ุชุดุงุจู ุนุงูู (ูุฌุจ ุงููุฑุงุฌุนุฉ)
- **<70%**: ููุจูู

### Approval Matrix
| Risk Level | Approval Required | Reviewers |
|------------|------------------|-----------|
| low        | โ No            | -         |
| medium     | โ Yes           | MOTEB1989 |
| high       | โ Yes           | MOTEB1989 + Security Team |

## ุงูุตูุงูุฉ

### ูุฒุงููุฉ ุงููุณุชูุฏุนุงุช
```bash
# ูุฏูู
gh workflow run sync-repos.yml

# ุขูู (ูู 6 ุณุงุนุงุช)
# ุงูุธุฑ .github/workflows/sync-repos.yml
```

### ุชุญุฏูุซ ุงููุธุงู
```bash
# Pull ุฃุญุฏุซ ุงูุชุบููุฑุงุช
git pull origin main

# ุฃุนุฏ ุชุซุจูุช Hooks
npm run install:hooks
```

## ุขููุฉ ุนูู ุงููุธุงู

### 1. Fingerprint Calculation
ูุญุณุจ ุงููุธุงู ุจุตูุฉ ูุฑูุฏุฉ ููู ูููู ุจุงุณุชุฎุฏุงู SHA-256:
```javascript
{
  id: agent.id,
  name: agent.name,
  category: agent.category,
  contexts: JSON.stringify(agent.contexts),
  models: JSON.stringify(agent.models)
}
```

### 2. Similarity Check
ููุญุต ุงููุธุงู ุงูุชุดุงุจู ุจูู ุงููููุงุก ุจูุงุกู ุนูู:
- **50%**: ุชุทุงุจู ุงูุงุณู (case-insensitive)
- **25%**: ุชุทุงุจู ุงููุฆุฉ (category)
- **25%**: ุชุทุงุจู ุงูุณูุงูุงุช (contexts overlap)

### 3. Duplicate Detection
ููุดู ุงููุธุงู ุซูุงุซุฉ ุฃููุงุน ูู ุงูุชูุฑุงุฑ:
- **exact-id**: ููุณ ุงูู ID ุชูุงูุงู
- **exact**: ููุณ ุงูู fingerprint (ุชุทุงุจู ูุงูู)
- **similar**: ุชุดุงุจู 70%+ (ูุชุทูุจ ูุฑุงุฌุนุฉ)

## ุงูุชูุงูู ูุน CI/CD

### Validation Workflow
ูุนูู ุชููุงุฆูุงู ุนูุฏ:
- ูุชุญ PR ูุนุฏู `agents/registry.yaml`
- Push ุฅูู `main` ูุคุซุฑ ุนูู `agents/`

### Sync Workflow
ูุนูู ุชููุงุฆูุงู:
- ูู 6 ุณุงุนุงุช (cron)
- ุนูุฏ Push ุฅูู `main`
- ูุฏููุงู (workflow_dispatch)

## ุงูุฃูุงูุฑ ุงูุณุฑูุนุฉ

```bash
# ูุญุต ุงูุชูุฑุงุฑุงุช
npm run check:duplicates

# ุฏูุฌ ูููุงุก ูู ูุตุฏุฑ ุซุงููู
npm run merge:agents

# ุชุซุจูุช Git Hooks
npm run install:hooks

# ูุญุต ุดุงูู ููู Registry
npm run validate:registry

# ูุญุต ุงูู CI ูุงููุงู
npm run ci:check
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: "Registry format invalid"
**ุงูุญู**: ุชุฃูุฏ ูู ุตุญุฉ ุจููุฉ YAML ูู `agents/registry.yaml`

### ูุดููุฉ: ุชูุฑุงุฑุงุช ููุชุดูุฉ
**ุงูุญู**: 
1. ุดุบู `npm run check:duplicates` ููุนุฑูุฉ ุงูุชูุงุตูู
2. ุฑุงุฌุน ุงููููุงุก ุงูููุฑุฑุฉ
3. ุงุญุฐู ุฃู ุฏูุฌ ุงููููุงุก ุงูููุฑุฑุฉ

### ูุดููุฉ: Git Hook ูุง ูุนูู
**ุงูุญู**: ุฃุนุฏ ุชุซุจูุช ุงูู hooks ุจู `npm run install:hooks`

## ุงูุฃูุงู

### ุญูุงูุฉ ูู ุงูุชูุฑุงุฑ
- โ ูุญุต ุชููุงุฆู ูุจู ูู commit
- โ ูุญุต ูู CI ุนูู ูู PR
- โ ููุน merge ููู PRs ุงูููุฑุฑุฉ

### ุญูุงูุฉ ุงูุจูุงูุงุช
- โ ุงููุธุงู ูุฑุงุกุฉ ููุท (ูุง ูุนุฏู Registry ุชููุงุฆูุงู)
- โ ุฌููุน ุงูุชุบููุฑุงุช ุชุชุทูุจ ูุฑุงุฌุนุฉ ุจุดุฑูุฉ
- โ Backup ุชููุงุฆู ูุจู ุฃู ุฏูุฌ

## ุงููุณุงููุฉ

ุนูุฏ ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ ููุธุงู ุตุงููู:
1. ุงุฎุชุจุฑ ุนูู registry ุญูููู
2. ุฃุถู tests ุฅุฐุง ูุฒู
3. ุญุฏุซ ูุฐู ุงููุซููุฉ
4. ุดุบู `npm run check:duplicates` ูุจู commit

---

**ุตุงููู**: ูุฃู ุงููุธุงู ูุฌุจ ุฃู ูููู ุตุงููุงู ูู ุงูุชูุฑุงุฑ ๐งน
