# ğŸ¨ BSM Unified Platform

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© (Overview)

Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…ÙˆØ­Ø¯Ø© Ù„Ù€ BSM/LexBANK ØªØ¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª ÙˆØ§Ù„ÙˆÙƒÙ„Ø§Ø¡ ÙÙŠ ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø³Ù„Ø³Ø© ÙˆØ§Ø­ØªØ±Ø§ÙÙŠØ©.

The BSM/LexBANK Unified Platform combines all interfaces and agents into a seamless, professional user experience.

---

## ğŸŒŸ Ø§Ù„Ù…ÙŠØ²Ø§Øª (Features)

### 1. Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆØ­Ø¯Ø© (Unified Interface)
- âœ… ØªØµÙ…ÙŠÙ… Ø­Ø¯ÙŠØ« (Glass Morphism + Dark Mode)
- âœ… Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ RTL/LTR (Ø¹Ø±Ø¨ÙŠ/Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)
- âœ… Responsive (Ù…ÙˆØ¨Ø§ÙŠÙ„ + Ø¯ÙŠØ³ÙƒØªÙˆØ¨)
- âœ… PWA (Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ«Ø¨ÙŠØª)

### 2. Ø§Ø®ØªÙŠØ§Ø± Ø°ÙƒÙŠ (Smart Selection)
- âœ… 13 ÙˆÙƒÙ„Ø§Ù‹ Ù…ØªØ®ØµØµØ§Ù‹ (13 Specialized Agents)
- âœ… 9 Ù†Ù…Ø§Ø°Ø¬ AI Ù…Ø®ØªÙ„ÙØ© (9 Different AI Models)
- âœ… ØªØµÙ†ÙŠÙ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø© (Category-based organization)
- âœ… ØªÙˆØµÙŠØ§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ© (Automatic recommendations)

### 3. Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (AI Models)
| Model | Provider | Icon | Status | Capabilities |
|-------|----------|------|--------|--------------|
| **OpenAI GPT-4** | OpenAI | ğŸ¤– | âœ… Active | Chat, Code, Analysis |
| **Google Gemini** | Google | ğŸ§  | âœ… Active | Chat, Creative, Arabic |
| **Claude AI** | Anthropic | ğŸ“ | âœ… Active | Legal, Code Review, Security |
| **Perplexity** | Perplexity AI | ğŸ” | âœ… Active | Search, News, Facts |
| **Groq LPU** | Groq | âš¡ | âœ… Active | Speed, Realtime, Translation |
| **KIMI AI** | Moonshot | ğŸŒ™ | âœ… Active | Chinese, Multilingual |
| **Cohere** | Cohere | ğŸ”® | â³ Optional | Chat, Embeddings |
| **Mistral AI** | Mistral | ğŸŒªï¸ | â³ Optional | Chat, Reasoning |
| **Azure OpenAI** | Microsoft | â˜ï¸ | â³ Optional | Enterprise, Chat |

### 4. Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ù…ØªØ®ØµØµÙˆÙ† (Specialized Agents)

#### ğŸ”„ Ø§Ù„Ù…ÙˆØ¬Ù‘Ù‡Ø§Øª (Routers)
- **agent-auto** - Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„Ø°ÙƒÙŠ / Smart Auto Router
  - ÙŠØ®ØªØ§Ø± Ø£ÙØ¶Ù„ ÙˆÙƒÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„Ùƒ
  - Automatically selects the best agent for your query

#### âš–ï¸ Ø§Ù„Ø®Ø¨Ø±Ø§Ø¡ (Experts)
- **legal-agent** - Ø§Ù„Ø®Ø¨ÙŠØ± Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ / Legal Expert
  - Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© ÙˆØ§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
  - Saudi legal systems specialist

- **governance-agent** - Ø®Ø¨ÙŠØ± Ø§Ù„Ø­ÙˆÙƒÙ…Ø© / Governance Expert
  - Ø­ÙˆÙƒÙ…Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ©
  - Corporate governance and compliance

#### ğŸ› ï¸ Ø§Ù„Ø£Ø¯ÙˆØ§Øª (Tools)
- **security-agent** - Ù…Ø¯Ù‚Ù‚ Ø§Ù„Ø£Ù…Ø§Ù† / Security Scanner
  - ÙØ­Øµ Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§ÙƒØªØ´Ø§Ù Ø§Ù„Ø«ØºØ±Ø§Øª
  - Security audits and vulnerability detection

- **code-review-agent** - Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„ÙƒÙˆØ¯ / Code Reviewer
  - Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©
  - Code quality and best practices

- **integrity-agent** - Ø­Ø§Ø±Ø³ Ø§Ù„Ø³Ù„Ø§Ù…Ø© / Integrity Guardian
  - Ù…Ø±Ø§Ù‚Ø¨Ø© ØµØ­Ø© Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹
  - Repository health monitoring

- **pr-merge-agent** - Ù…Ø¯ÙŠØ± Ø§Ù„Ø¯Ù…Ø¬ / Merge Manager
  - Ø¯Ù…Ø¬ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
  - Automated PR merging

#### ğŸ§  Ù†Ù…Ø§Ø°Ø¬ AI (AI Models)
- **gemini-agent** - Google Gemini
  - Ù…Ø­Ø§Ø¯Ø«Ø© Ø¹Ø±Ø¨ÙŠØ© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© / Creative Arabic conversation

- **claude-agent** - Claude AI
  - ØªØ­Ù„ÙŠÙ„ Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ù…ØªÙ‚Ø¯Ù… / Advanced legal analysis

- **perplexity-agent** - Perplexity
  - Ø¨Ø­Ø« Ù…Ø¨Ø§Ø´Ø± Ù…Ø¹ Ù…ØµØ§Ø¯Ø± / Real-time search with sources

- **groq-agent** - Groq Ø§Ù„Ø³Ø±ÙŠØ¹ / Groq Fast
  - Ø§Ø³ØªØ¬Ø§Ø¨Ø© ÙÙˆØ±ÙŠØ© ÙØ§Ø¦Ù‚Ø© Ø§Ù„Ø³Ø±Ø¹Ø© / Ultra-fast instant response

- **kimi-agent** - KIMI AI
  - Ù…ØªØ®ØµØµ ØµÙŠÙ†ÙŠ ÙˆØ¹Ø±Ø¨ÙŠ / Chinese and Arabic specialist

#### ğŸ’¬ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª (Basic)
- **direct** - Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¨Ø§Ø´Ø±Ø© / Direct Chat
  - Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¯ÙˆÙ† ÙˆÙƒÙŠÙ„
  - Direct conversation without agent

---

## ğŸš€ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… (Usage)

### Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ (Quick Access)

```
Production:   https://moteb1989.github.io/BSM/
Development:  http://localhost:3000/
Backend:      https://sr-bsm.onrender.com
```

### Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆÙƒÙŠÙ„ (Selecting an Agent)

**Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ (For Regular Users):**
- Ø§Ø³ØªØ®Ø¯Ù… "Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ" - ÙŠØ®ØªØ§Ø± Ø£ÙØ¶Ù„ ÙˆÙƒÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- Use "Smart Auto Router" - automatically selects the best agent

**Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (For Advanced Users):**
- Ø§Ø®ØªØ± ÙˆÙƒÙŠÙ„ Ù…Ø­Ø¯Ø¯ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©:
  - âš–ï¸ Ø§Ù„Ø®Ø¨ÙŠØ± Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ - Ù„Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© / Legal questions
  - ğŸ›ï¸ Ø®Ø¨ÙŠØ± Ø§Ù„Ø­ÙˆÙƒÙ…Ø© - Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø­ÙˆÙƒÙ…Ø© / Governance questions
  - ğŸ”’ Ù…Ø¯Ù‚Ù‚ Ø§Ù„Ø£Ù…Ø§Ù† - Ù„ÙØ­Øµ Ø§Ù„Ø£Ù…Ø§Ù† / Security scanning
  - ğŸ’» Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„ÙƒÙˆØ¯ - Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ / Code review

**Ù„Ù„ØªØ¬Ø±Ø¨Ø© (For Experimentation):**
- Ø§Ø®ØªØ± Ù†Ù…ÙˆØ°Ø¬ AI Ù…Ø¨Ø§Ø´Ø±:
  - ğŸ§  Gemini - Ù„Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ / Creative Arabic content
  - ğŸ“ Claude - Ù„Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… / Advanced legal analysis
  - ğŸ” Perplexity - Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± / Real-time search
  - âš¡ Groq - Ù„Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„ÙÙˆØ±ÙŠØ© / Instant response

---

## ğŸ”§ Ø§Ù„ØªÙƒØ§Ù…Ù„ (Integration)

### Frontend âœ Backend

```javascript
// Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ØªØªØµÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ù€ Backend
// Frontend automatically connects to Backend
const API_BASE = window.API_BASE; // Auto-detected

// Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© / Send message
const response = await fetch(`${API_BASE}/api/control/run`, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    agentId: 'gemini-agent',
    input: 'Ù…Ø±Ø­Ø¨Ø§Ù‹',
    context: { mobile: false, language: 'ar' }
  })
});
```

### Backend âœ AI Models

```javascript
// Backend ÙŠØ®ØªØ§Ø± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
// Backend automatically selects the model
import { models, isModelAvailable } from './config/models.js';

if (isModelAvailable('google')) {
  // Use Gemini
} else if (isModelAvailable('openai')) {
  // Fallback to OpenAI
}
```

---

## ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (Statistics)

| Ø§Ù„Ù…ÙƒÙˆÙ† (Component) | Ø§Ù„Ø¹Ø¯Ø¯ (Count) | Ø§Ù„Ø­Ø§Ù„Ø© (Status) |
|-------------------|--------------|----------------|
| Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ù…ØªØ®ØµØµÙŠÙ† (Specialized Agents) | 13 | âœ… Active |
| Ù†Ù…Ø§Ø°Ø¬ AI (AI Models) | 9 | âœ… 6 Active + 3 Optional |
| Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª (Interfaces) | 1 (Unified) | âœ… Active |
| Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø© (Supported Languages) | 2 (AR/EN) | âœ… Active |
| API Endpoints | 15+ | âœ… Active |

---

## ğŸ” Ø§Ù„Ø£Ù…Ø§Ù† (Security)

- âœ… HTTPS ÙÙ‚Ø· ÙÙŠ Production (HTTPS only in Production)
- âœ… CORS Ù…Ø­Ø¯Ø¯ (Restricted CORS)
- âœ… Rate limiting
- âœ… Input validation
- âœ… API keys Ù…Ø®ÙÙŠØ© (Hidden API keys)
- âœ… Helmet security headers
- âœ… No secrets in code

---

## ğŸ§ª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (Testing)

### Manual Testing

```bash
# 1. Test connection
curl https://sr-bsm.onrender.com/health

# 2. Test chat endpoint
curl -X POST https://sr-bsm.onrender.com/api/chat/direct \
  -H "Content-Type: application/json" \
  -d '{"message":"Ù…Ø±Ø­Ø¨Ø§Ù‹","language":"ar"}'

# 3. Test agent
curl -X POST https://sr-bsm.onrender.com/api/control/run \
  -H "Content-Type: application/json" \
  -d '{"agentId":"gemini-agent","input":"Hello"}'
```

### Validation

```bash
# Run all validation tests
npm test

# Output:
âœ… Registry validated: 16 agents with governance fields
âœ… Orchestrator config validated: 3 agents configured
OK: validation passed
```

---

## ğŸ› Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ (Troubleshooting)

### Problem: "ØºÙŠØ± Ù…ØªØµÙ„" (Disconnected)

**Ø§Ù„Ø­Ù„ (Solution):**
1. ØªØ­Ù‚Ù‚ Ù…Ù† Backend Ø¹Ù„Ù‰ Render (Check Backend on Render)
2. Ø§ÙØªØ­ Console (F12) ÙˆØ§Ù†Ø¸Ø± Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ (Check Console for errors)
3. Ø¬Ø±Ø¨ refresh (Ctrl+Shift+R)

### Problem: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ù…Ø§Ø°Ø¬ Ù…ØªØ§Ø­Ø©" (No models available)

**Ø§Ù„Ø­Ù„ (Solution):**
1. ØªØ£ÙƒØ¯ Ù…Ù† API Keys ÙÙŠ Render (Check API Keys in Render)
2. ØªØ­Ù‚Ù‚ Ù…Ù† `.env` ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ (Verify .env has keys)
3. Ø£Ø¹Ø¯ deploy Backend (Redeploy Backend)

### Problem: "Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø·ÙŠØ¦Ø©" (Interface is slow)

**Ø§Ù„Ø­Ù„ (Solution):**
- Ø§Ø³ØªØ®Ø¯Ù… Groq Ù„Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ÙØ§Ø¦Ù‚Ø© (Use Groq for ultra-fast speed)
- Ù‚Ù„Ù„ history Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù„Ù€ API (Reduce history sent to API)
- ÙØ¹Ù‘Ù„ caching ÙÙŠ Backend (Enable caching in Backend)

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… (Support)

- **GitHub Issues:** https://github.com/MOTEB1989/BSM/issues
- **Documentation:** https://moteb1989.github.io/BSM/docs/
- **Email:** support@bsm.sa (if applicable)

---

## ğŸ“š Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ (References)

### Related Documentation
- [CLAUDE.md](../CLAUDE.md) - Full system documentation
- [README.md](../README.md) - Project overview
- [ARCHITECTURE.md](ARCHITECTURE.md) - System architecture
- [SECURITY.md](SECURITY.md) - Security guidelines

### Configuration Files
- [shared/config.js](../shared/config.js) - Unified configuration
- [src/config/models.js](../src/config/models.js) - Model providers
- [agents/registry.yaml](../agents/registry.yaml) - Agent registry
- [.env.example](../.env.example) - Environment variables

---

## ğŸ¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ° (Implementation Notes)

### Design Decisions
1. **Glass Morphism Design**: Modern, professional look with frosted glass effect
2. **Category-based Organization**: Agents organized by function (routers, experts, tools, AI models)
3. **Real-time Status**: Live connection indicator for backend health
4. **Bilingual Support**: Full Arabic/English with RTL/LTR direction switching
5. **Markdown Rendering**: Rich formatting for agent responses
6. **LocalStorage Persistence**: Chat history saved locally

### Performance Optimizations
- Minified JavaScript for faster load
- CSS animations for smooth UX
- Lazy loading for agent selection
- Auto-scroll optimization
- Connection pooling for API calls

### Future Enhancements
- [ ] Voice input support
- [ ] Export chat history
- [ ] Agent performance metrics
- [ ] Multi-agent conversations
- [ ] Code syntax highlighting
- [ ] File upload support
- [ ] Image generation integration

---

**Version:** 2.0.0  
**Last Updated:** 2026-02-19  
**Status:** âœ… Production Ready
